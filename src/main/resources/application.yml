# ============================================
# 共通設定（全環境で適用）
# ============================================

spring:
  # プロファイルは環境変数 SPRING_PROFILES_ACTIVE で指定
  # デフォルト: dev（開発環境）
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  
  # OpenAI設定（api-keyが設定されている場合のみ有効）
  # 自動設定がエラーにならないよう、AutoConfigurationクラスに条件付きアノテーションを追加
  autoconfigure:
    exclude:
      - org.springframework.ai.autoconfigure.openai.OpenAiAutoConfiguration

  # MyBatis設定（共通）
  main:
    allow-circular-references: true

  # JPA設定（共通）
  jpa:
    defer-datasource-initialization: true
    generate-ddl: false
    hibernate:
      ddl-auto: none

# MyBatis設定（共通）
mybatis:
  configuration:
    map-underscore-to-camel-case: true
  type-aliases-package: com.example.model
  mapper-locations: classpath*:/com/example/mapper/**/*.xml

# ログ設定（共通）
logging:
  file:
    name: app.log
  level:
    root: INFO
    com.example: DEBUG

aws:
  s3:
    bucket: ${AWS_S3_BUCKET:}
    region: ${AWS_REGION:ap-northeast-1}
    access-key-id: ${AWS_ACCESS_KEY_ID:}
    secret-access-key: ${AWS_SECRET_ACCESS_KEY:}
    endpoint: ${AWS_S3_ENDPOINT:}

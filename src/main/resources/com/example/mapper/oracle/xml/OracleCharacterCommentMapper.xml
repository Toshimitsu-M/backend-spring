<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.oracle.mapper.OracleCharacterCommentMapper">

	<!-- 全件取得 -->
	<select id="selectAll" resultType="com.example.entity.rdb.RdbCharacterComment">
		SELECT * FROM CHARACTER_COMMENTS
	</select>

	<!-- キャラクターIDでコメント取得 -->
	<select id="selectByCharacterId" resultType="com.example.entity.rdb.RdbCharacterComment">
		SELECT * FROM CHARACTER_COMMENTS
		WHERE anilist_id = #{anilistId}
	</select>

	<!-- ユーザIDでコメント取得 -->
	<select id="selectByUserId" resultType="com.example.entity.rdb.RdbCharacterComment">
		SELECT * FROM CHARACTER_COMMENTS
		WHERE user_id = #{userId}
	</select>

	<!-- キャラクターID＆ユーザIDでコメント取得 -->
	<select id="selectByCharacterIdAndUserId" resultType="com.example.entity.rdb.RdbCharacterComment">
		SELECT * FROM CHARACTER_COMMENTS
		WHERE anilist_id = #{characterId} AND user_id = #{userId}
	</select>

	<!-- シーケンス値取得 -->
	<select id="getNextSequence" resultType="java.lang.Integer">
		SELECT CHARACTER_COMMENTS_SEQUENCE.NEXTVAL FROM DUAL
	</select>

	<!-- コメントIDでコメント件数取得 -->
	<select id="selectByCommentId" resultType="int">
		SELECT count(*) FROM CHARACTER_COMMENTS
		WHERE id = #{id}
	</select>

	<!-- 挿入 -->
	<insert id="insert" parameterType="com.example.entity.rdb.RdbCharacterComment">
        INSERT INTO CHARACTER_COMMENTS (id, anilist_id, user_id, "COMMENT")
        VALUES (#{id}, #{anilistId}, #{userId}, #{comment})
	</insert>

	<!-- 主キー指定で更新 -->
	<update id="updateByPrimaryKey" parameterType="com.example.entity.rdb.RdbCharacterComment">
		UPDATE CHARACTER_COMMENTS
		SET anilist_id = #{anilistId}, user_id = #{userId}, "COMMENT" = #{comment}
		WHERE id = #{id}
	</update>

	<!-- 主キー指定で削除 -->
	<delete id="deleteByPrimaryKey" parameterType="long">
		DELETE FROM CHARACTER_COMMENTS
		WHERE id = #{id}
	</delete>

</mapper>
